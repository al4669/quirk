<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>QUIRK</title>
    
    <!-- Alpine.js 3.13.3 -->
    <script defer src="static/deps/alpine.min.js"></script> 
    
    <!-- Marked.js v11.1.1 for Markdown -->
    <script src="static/deps/marked.min.js"></script>
    
    <!-- Prism.js 1.29.0 for syntax highlighting -->
    <link href="static/deps/prism-laserwave.css" rel="stylesheet" />
    <script src="static/deps/prism.min.js"></script>
    <script src="static/deps/prism-javascript.min.js"></script>
    <script src="static/deps/prism-python.min.js"></script>
    <script src="static/deps/prism-gdscript.js"></script>

    <script src="static/deps/prism-css.min.js"></script>

    <!-- JSZip 3.10.1 for compression  -->
    <script src="static/deps/jszip.min.js"></script>
    <link rel="stylesheet" href="static/app.css">

</head>
<body>
    <div class="bg-canvas"></div>
    <div class="grid-overlay"></div>
    
    <!-- Particles -->
    <div id="particles"></div>
    
    <!-- Board Selector Menu -->
    <div class="board-menu">
        <div class="board-menu-header">Boards</div>
        <div id="boardMenuList" class="board-menu-list"></div>
    </div>

    <!-- Board Menu Toggle -->
    <button class="board-menu-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
        </svg>
    </button>

    <!-- Toolbar -->
    <div class="toolbar">
        <button class="tool-btn" onclick="wallboard.addMarkdownNode(); document.querySelector('.toolbar').classList.remove('mobile-open');">
            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"></path>
                <path d="M8 12l2 2 4-4"></path>
            </svg>
            <span class="tool-text">Markdown</span>
        </button>
        <button class="tool-btn" onclick="wallboard.addImageNode(); document.querySelector('.toolbar').classList.remove('mobile-open');">
            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            <span class="tool-text">Image</span>
        </button>
        <button class="tool-btn" onclick="wallboard.clearBoard(); document.querySelector('.toolbar').classList.remove('mobile-open');">
            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
            <span class="tool-text">Clear</span>
        </button>
        <button class="tool-btn" onclick="wallboard.showThemeSelector(); document.querySelector('.toolbar').classList.remove('mobile-open');">
            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <span class="tool-text">Theme</span>
        </button>
        <button class="tool-btn" onclick="exportManager.showExportDialog(); document.querySelector('.toolbar').classList.remove('mobile-open');">
            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            <span class="tool-text">Export</span>
        </button>
        <button class="tool-btn" onclick="wallboard.renameBoardDialog(); document.querySelector('.toolbar').classList.remove('mobile-open');">
            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
            <span class="tool-text">Rename Board</span>
        </button>
        <button class="tool-btn" onclick="wallboard.createNewBoardDialog(); document.querySelector('.toolbar').classList.remove('mobile-open');">
            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            <span class="tool-text">New Board</span>
        </button>
        <button class="tool-btn" onclick="wallboard.deleteCurrentBoard(); document.querySelector('.toolbar').classList.remove('mobile-open');">
            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
            <span class="tool-text">Delete Board</span>
        </button>
    </div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>

    <!-- Canvas -->
    <div class="canvas" id="canvas">
        <!-- Connections SVG (inside canvas to inherit transforms) -->
        <svg class="svg-connections" id="connections"></svg>
    </div>

    <!-- Instructions -->
    <div class="instructions">
        <div class="instruction-item">
            <span class="key">Drag</span> from card content to connect nodes
        </div>
        <div class="instruction-item">
            <span class="key">Alt + Drag</span> to cut connections
        </div>
        <div class="instruction-item">
            <span class="key">Mouse Wheel</span> to zoom in/out
        </div>
        <div class="instruction-item">
            <span class="key">Drag Canvas</span> to pan around
        </div>
        <div class="instruction-item">
            <span class="key">D</span> to duplicate selected nodes
        </div>
        <div class="instruction-item">
            <span class="key">Ctrl+Z / Ctrl+Y</span> to undo/redo
        </div>
        <div class="instruction-item">
            <span class="key">Ctrl+A</span> to select all nodes
        </div>
        <div class="instruction-item">
            <span class="key">Shift+Click</span> to multi-select nodes
        </div>
        <div class="instruction-item">
            <span class="key">Delete / Backspace</span> to delete selected nodes
        </div>
    </div>
    
    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
        <div class="context-item" onclick="wallboard.editNode()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
            Edit
        </div>
        <div class="context-item" onclick="wallboard.duplicateNode()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
            Duplicate
        </div>
        <div class="context-divider"></div>
        <div class="context-item" onclick="wallboard.deleteNode()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
            Delete
        </div>
    </div>
    
   <script src="static/connection-manager.js"></script>
   <script src="static/export-manager.js"></script>
   <script src="static/alignment-manager.js"></script>
   <script src="static/keyboard-shortcuts.js"></script>
   <script src="static/app.js"></script>
</body>
</html>